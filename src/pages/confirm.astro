---
// src/pages/confirm.astro
import Layout from '../layouts/Layout.astro';

const status = Astro.url.searchParams.get('status');
const reportData = Astro.url.searchParams.get('data');
---

<Layout title="Email Confirmed | SolarMath">
  <div class="max-w-xl mx-auto px-6 py-20 text-center">
    {status === 'success' && (
      <div>
        <div class="text-6xl mb-6">âœ…</div>
        <h1 class="text-3xl font-black text-slate-900 mb-4">You're confirmed!</h1>
        <p class="text-slate-600 mb-8">
          Your personalised 25-year solar report is on its way to your inbox. 
          You can also view it right now:
        </p>
        <a 
          href={`/report?data=${reportData}`}
          class="inline-block bg-blue-600 hover:bg-blue-700 text-white font-bold px-8 py-4 rounded-xl transition"
        >
          View My Report
        </a>
      </div>
    )}

    {status === 'invalid' && (
      <div>
        <div class="text-6xl mb-6">ðŸ¤”</div>
        <h1 class="text-3xl font-black text-slate-900 mb-4">Invalid or expired link</h1>
        <p class="text-slate-600 mb-8">
          This confirmation link isn't valid. It may have already been used or expired.
        </p>
        <a 
          href="/"
          class="inline-block bg-blue-600 hover:bg-blue-700 text-white font-bold px-8 py-4 rounded-xl transition"
        >
          Run a New Calculation
        </a>
      </div>
    )}

    {status === 'error' && (
      <div>
        <div class="text-6xl mb-6">ðŸ˜•</div>
        <h1 class="text-3xl font-black text-slate-900 mb-4">Something went wrong</h1>
        <p class="text-slate-600 mb-8">
          We couldn't confirm your email. Please try again or contact us if the problem persists.
        </p>
        <a 
          href="/"
          class="inline-block bg-blue-600 hover:bg-blue-700 text-white font-bold px-8 py-4 rounded-xl transition"
        >
          Back to Calculator
        </a>
      </div>
    )}

    {!status && (
      <div>
        <div class="text-6xl mb-6">ðŸ“§</div>
        <h1 class="text-3xl font-black text-slate-900 mb-4">Check your email</h1>
        <p class="text-slate-600 mb-8">
          We've sent you a confirmation link. Click it to get your personalised solar report.
        </p>
        <p class="text-sm text-slate-400">
          Didn't get it? Check your spam folder.
        </p>
      </div>
    )}
  </div>
</Layout>
