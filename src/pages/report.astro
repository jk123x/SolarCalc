---
export const prerender = false;

import Layout from '../layouts/Layout.astro';
---

<Layout title="Your Solar Report | SolarMath">
  <div id="report-root">
    <div class="max-w-xl mx-auto px-6 py-20 text-center">
      <div class="text-4xl mb-4">⏳</div>
      <p class="text-slate-600">Loading your report...</p>
    </div>
  </div>
</Layout>

<script>
  const params = new URLSearchParams(window.location.search);
  const dataParam = params.get('data');
  const root = document.getElementById('report-root');
  
  if (dataParam && root) {
    try {
      const data = JSON.parse(decodeURIComponent(dataParam));
      console.log('Report data:', data);
      root.innerHTML = `
        <div class="max-w-xl mx-auto px-6 py-20 text-center">
          <div class="text-4xl mb-4">✅</div>
          <p class="text-slate-600">Data loaded! Expected value: $${data.expectedValue.toLocaleString()}</p>
        </div>
      `;
    } catch (e) {
      console.error('Parse error:', e);
    }
  }
</script>